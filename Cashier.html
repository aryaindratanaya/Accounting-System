<!DOCTYPE html>
<html lang="en">
  <head>
    <?!= include("Header"); ?>
  </head>
  <body>
    <div class="px-4 py-3">
      <form>
        <div class="form-row mb-2">
          <div class="col">
            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text">Order ID</span>
              </div>
              <input
                id="inputDateTime"
                type="datetime-local"
                class="form-control"
                placeholder="Input Order iD"
              />
            </div>
          </div>
          <div class="col">
            <div class="form-row">
              <div class="col">
                <input
                  type="radio"
                  class="btn-check"
                  name="options-eat"
                  id="inputDineIn"
                  autocomplete="off"
                  checked
                  style="display: none"
                />
                <label class="btn btn-primary btn-block" for="inputDineIn"
                  >Dine-In</label
                >
              </div>
              <div class="col">
                <input
                  type="radio"
                  class="btn-check"
                  name="options-eat"
                  id="inputTakeAway"
                  autocomplete="off"
                  style="display: none"
                />
                <label
                  class="btn btn-outline-primary btn-block"
                  for="inputTakeAway"
                  >Take Away</label
                >
              </div>
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="inputFnB">Food & Beverages</label>
            <select
              id="inputFnB"
              class="form-control"
              placeholder="Select Food or Beverages"
            >
              <? drinks.forEach((item, i) =>
              { ?>
              <option>
                <?= i ?>.
                <?= item[0] ?>
              </option>
              <? }); ?>
            </select>
          </div>
          <div class="form-group col-md-3">
            <label for="inputPrice">Price</label>
            <div class="input-group">
              <div class="input-group-prepend">
                <span class="input-group-text">Rp</span>
              </div>
              <input
                type="text"
                class="form-control"
                id="inputPrice"
                placeholder="Price"
              />
            </div>
          </div>
          <div class="form-group col-md-3">
            <label for="inputQuantity">Quantity</label>
            <input
              type="number"
              class="form-control"
              id="inputQuantity"
              placeholder="Quantity"
            />
          </div>
        </div>
        <div class="form-group">
          <label for="inputNotes">Notes</label>
          <textarea
            type="text"
            class="form-control"
            id="inputNotes"
            placeholder="Add extra notes here."
          ></textarea>
        </div>
        <button
          type="button"
          class="btn btn-primary btn-block"
          onclick="addItem()"
        >
          Add
        </button>
        <table class="table">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Item</th>
              <th scope="col">Quantity</th>
              <th scope="col">Price</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th scope="row">1</th>
              <td>Long Black</td>
              <td>2</td>
              <td>20000</td>
            </tr>
          </tbody>
        </table>
        <button type="submit" class="btn btn-success btn-block">Submit</button>
      </form>
    </div>

    <script>
      resetPage();

      function resetPage() {
        $("#inputDateTime").val(
          new Date().toJSON().slice(0, 11) +
            ("0" + new Date().getHours()).slice(-2) +
            ":" +
            ("0" + new Date().getMinutes()).slice(-2)
        );
      }

      // Fill the inputPrice
      $("#inputFnB").on("change", function () {
        const selectedFnB = Number(this.value.split(".")[0]) || 0;
        const drinksRaw = <?= drinks ?>;
        const drinks = drinksRaw.split(",");
        const selectedPrice = drinks[selectedFnB * 2 + 1];
        $("#inputPrice").val(selectedPrice);
      });

      function addItem() {
        const selectedFnB = $("#inputFnB").val().split(". ")[1];
        const selectedPrice = $("#inputPrice").val();
        console.log(selectedFnB);
        console.log(selectedPrice);
        $("tbody").append(
          "<tr><th scope='row'>2</th><td>" +  + "</td><td>2</td><td>20000</td></tr>"
        );
      }
    </script>

    <?!= include("Footer"); ?>
  </body>
</html>
